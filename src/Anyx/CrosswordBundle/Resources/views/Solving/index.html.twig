{% extends '::main.html.twig' %}

{% block javascripts %}
	{{ parent() }}

	{% javascripts
		'@AnyxCrosswordBundle/Resources/public/js/jquery.min.js'
		'@AnyxCrosswordBundle/Resources/public/js/jquery-ui.min.js'
	
		'@AnyxCrosswordBundle/Resources/public/js/json2.js'
		'@AnyxCrosswordBundle/Resources/public/js/underscore.js'
		'@AnyxCrosswordBundle/Resources/public/js/underscore.string.js'
		'@AnyxCrosswordBundle/Resources/public/js/backbone.js'
		'@AnyxCrosswordBundle/Resources/public/js/backbone.validations.js'
		
		'@FOSJsRoutingBundle/Resources/public/js/router.js'

		'@AnyxCrosswordBundle/Resources/public/js/views/View.js'
		'@AnyxCrosswordBundle/Resources/public/js/views/SolverWord.js'
		'@AnyxCrosswordBundle/Resources/public/js/views/WordDefinition.js'
		
		'@AnyxCrosswordBundle/Resources/public/js/presenters/Presenter.js'		
		'@AnyxCrosswordBundle/Resources/public/js/presenters/Solver.js'
	%}
	<script type="text/javascript" src="{{ asset_url }}"></script>
	{% endjavascripts %}
	
	<script type="text/javascript">
		$(function(){
			var solver = new Crossword.Presenter.Solver({
				el			: $('.i-crossword'),
				cellSize	: 19,
				words		: {{ crossword.wordsForSolving | serialize | raw }},
				templates	: {
					word	: 't-solver-word'
				}
			});
		});	
	</script>
	
	<script type="text/javascript" src="{{ path('fos_js_routing_js', {"callback" : "fos.Router.setData"}) }}"></script>
{% endblock %}	

{% block stylesheets %}
	{{ parent() }}
	{% stylesheets
		'@AnyxCrosswordBundle/Resources/public/css/solver.css'
	%}
		<link type="text/css" rel="stylesheet" href="{{ asset_url }}" />
	{% endstylesheets %}
{% endblock %}

{% block page_title %} Solving crossword &laquo;{{crossword.title}}&raquo; {% endblock %}

{% block body %}

<div class="columns-container">
	<div class="left-column">
		<div class="i-crossword crossword-solver">
		</div>
	</div>
	<div class="right-column">
	</div>
</div>

<script type="text/template" id="t-solver-word">
<table class="solver-word-table">
	<% if ( word.horizontal ) { %>
		<tr>
		<% for( var i = 0; i < word.length; i++ ) { %>
			<td rel="<%= i %>"></td>
		<% } %>
		</tr>
	<% } else { %>
		<% for( var i = 0; i < word.length; i++ ) { %>
			<tr><td rel="<%= i %>"></td></tr>
		<% } %>
	<%} %>
</table>
</script>
{% endblock %}